"use strict";const searchButton=document.querySelector(".js-buttonSearch"),form=document.querySelector(".js-form"),ulResults=document.querySelector(".js-searchResult"),favUl=document.querySelector(".js-searchFavs"),resetButton=document.querySelector(".js-reset"),favSection=document.querySelector(".js-favArea"),defaultImage="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let allSeries=[],favoriteSeries=[];function search(){const e=document.querySelector(".js-searchBox").value;fetch("https://api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{const t=e;allSeries=[];for(const e of t)allSeries.push(e.show);createList(),makeLiClickable()})}function createList(){resultReset();for(let e=0;e<allSeries.length;e++){let t=null===allSeries[e].image?defaultImage:allSeries[e].image.medium;const a=allSeries[e].id,s=document.createElement("li"),i=document.createElement("img"),r=document.createElement("h3"),o=document.createTextNode(""+allSeries[e].name);i.src=t,i.alt="`${allSeries[i].name}`",r.appendChild(o),ulResults.appendChild(s),s.id=a,s.appendChild(i),s.appendChild(r),s.classList.add("js-results"),s.classList.add("js-results-color"),r.classList.add("js-series-name");void 0!==favoriteSeries.find(e=>e.id===a)?s.classList.add("js-favorite2"):s.classList.remove("js-favorite2")}}function makeLiClickable(){const e=document.querySelectorAll(".js-results");for(const t of e)t.addEventListener("click",favoriteShow)}function deleteIcon(){const e=document.querySelectorAll("small");for(const t of e)t.addEventListener("click",deleteFav)}function deleteFav(e){console.log("hice clic");const t=parseInt(e.currentTarget.id);console.log(t),favoriteSeries=favoriteSeries.filter(e=>e.id!==t),paintFav(),setLocalStorage()}function favoriteShow(e){const t=e.currentTarget,a=parseInt(t.id),s=allSeries.find(e=>e.id===a);void 0===favoriteSeries.find(e=>e.id===a)?favoriteSeries.push(s):favoriteSeries=favoriteSeries.filter(e=>e.id!==a),paintFav(),search(),setLocalStorage()}function paintFav(){favReset();for(let e=0;e<favoriteSeries.length;e++){let t=null===favoriteSeries[e].image?defaultImage:favoriteSeries[e].image.medium;const a=document.querySelector(".js-favArea"),s=document.createElement("small"),i=document.createElement("li"),r=document.createElement("img"),o=document.createElement("div"),l=document.createElement("h3");s.setAttribute("id",favoriteSeries[e].id);const n=document.createTextNode("[x]"),c=document.createTextNode(""+favoriteSeries[e].name);r.src=t,r.alt="`${favoriteSeries[i].name}`",o.appendChild(l),o.appendChild(s),s.appendChild(n),l.appendChild(c),favUl.appendChild(i),i.id=favoriteSeries[e].id,i.appendChild(r),i.appendChild(o),o.classList.add("js-favDiv"),i.classList.add("js-favorite"),a.classList.remove("js-hidden"),favUl.classList.add("js-favoriteArea")}deleteIcon()}function setLocalStorage(){localStorage.setItem("favoritesSeries",JSON.stringify(favoriteSeries))}function getLocal(){let e=JSON.parse(localStorage.getItem("favoritesSeries"));null!==e&&(favoriteSeries=e),paintFav()}function resultReset(){ulResults.innerHTML=""}function favReset(){favUl.innerHTML="",search()}function resetFav(){localStorage.clear(),favoriteSeries=[],favReset(),favSection.classList.add("js-hidden")}function preventSubmit(e){e.preventDefault()}resetButton.addEventListener("click",resetFav),searchButton.addEventListener("click",search),form.addEventListener("submit",search),form.addEventListener("submit",preventSubmit),getLocal(),console.log(favoriteSeries);