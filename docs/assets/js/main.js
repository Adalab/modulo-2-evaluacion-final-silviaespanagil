"use strict";const searchButton=document.querySelector(".js-buttonSearch"),form=document.querySelector(".js-form"),ulResults=document.querySelector(".js-searchResult"),favUl=document.querySelector(".js-searchFavs"),resetButton=document.querySelector(".js-reset"),favSection=document.querySelector(".js-favArea"),defaultImage="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let allSeries=[],favoriteSeries=[];function search(){const e=document.querySelector(".js-searchBox").value;fetch("http://api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{const t=e;allSeries=[];for(const e of t)allSeries.push(e.show);createList(),makeLiClickable()})}function createList(){resultReset();for(let e=0;e<allSeries.length;e++){let t=null===allSeries[e].image?defaultImage:allSeries[e].image.medium;const a=allSeries[e].id,s=document.createElement("li"),r=document.createElement("img"),i=document.createElement("h3"),l=document.createTextNode(""+allSeries[e].name);r.src=t,r.alt="`${allSeries[i].name}`",i.appendChild(l),ulResults.appendChild(s),s.id=a,s.appendChild(r),s.appendChild(i),s.classList.add("js-results"),s.classList.add("js-results-color"),i.classList.add("js-series-name")}}function makeLiClickable(){const e=document.querySelectorAll(".js-results");for(const t of e)t.addEventListener("click",favoriteShow)}function favoriteShow(e){const t=e.currentTarget,a=parseInt(t.id);if(void 0===favoriteSeries.find(e=>e.id===a)){const e=allSeries.find(e=>e.id===a);favoriteSeries.push(e)}paintFav(),setLocalStorage()}function paintFav(){favReset();for(let e=0;e<favoriteSeries.length;e++){let t=null===favoriteSeries[e].image?defaultImage:favoriteSeries[e].image.medium;const a=document.querySelector(".js-favArea"),s=document.createElement("small"),r=document.createElement("li"),i=document.createElement("img"),l=document.createElement("div"),n=document.createElement("h3"),o=document.createTextNode("[x]"),c=document.createTextNode(""+favoriteSeries[e].name);i.src=t,i.alt="`${favoriteSeries[i].name}`",l.appendChild(n),l.appendChild(s),s.appendChild(o),n.appendChild(c),favUl.appendChild(r),r.id=favoriteSeries[e].id,r.appendChild(i),r.appendChild(l),l.classList.add("js-favDiv"),r.classList.add("js-favorite"),a.classList.remove("js-hidden"),favUl.classList.add("js-favoriteArea")}}function setLocalStorage(){localStorage.setItem("favoritesSeries",JSON.stringify(favoriteSeries))}function getLocal(){let e=JSON.parse(localStorage.getItem("favoritesSeries"));null!==e&&(favoriteSeries=e),paintFav()}function resultReset(){ulResults.innerHTML=""}function favReset(){favUl.innerHTML=""}function resetFav(){localStorage.clear(),favoriteSeries=[],favReset(),favSection.classList.add("js-hidden")}function deleteIcon(e){const t=document.querySelectorAll("small");for(const e of t)favCard.addEventListener("click",deleteFav)}function preventSubmit(e){e.preventDefault()}console.log(favoriteSeries),resetButton.addEventListener("click",resetFav),searchButton.addEventListener("click",search),form.addEventListener("submit",preventSubmit),getLocal();